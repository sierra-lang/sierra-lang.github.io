<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Sierra: A SIMD Extension for C++" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Sierra</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/sierra-lang">View on GitHub</a>

          <h1 id="project_title">Sierra</h1>
          <h2 id="project_tagline">A SIMD Extension for C++</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <div id="main_content" class="inner">

<p>
    Nowadays, SIMD hardware is omnipresent in computers.
    Nonetheless, many software projects make hardly use of SIMD instructions:
    Applications are usually written in general-purpose languages like C++.
    However, general-purpose languages only provide poor abstractions for SIMD programming enforcing an error-prone, assembly-like programming style.
</p>

<p>
    Sierra combines the full power of C++ with an intuitive and effective way to address SIMD hardware.
    With Sierra, the programmer can write efficient, portable and maintainable code.
    It is particularly easy to enhance existing code to run efficiently on SIMD machines.
</p>

<h2>Overview</h2>
<p>
    TODO
</p>

<h2>Building</h2>
<p>
    In order to build Sierra, we first fetch the official LLVM sources and then Sierra - which acts as drop-in replacement for clang.
    Additionally, we clone libsierra for supporting headers.
    We build everything with CMake.
</p>

<h3>Debug Build</h3>
<p>
    For a <em>debug</em> build we do the following:
</p>
<pre><code>mkdir sierra
cd sierra
mkdir build_debug
mkdir install_debug
git clone https://github.com/sierra-lang/libsierra.git
wget http://llvm.org/releases/3.4.2/llvm-3.4.2.src.tar.gz
tar xzfv llvm-3.4.2.src.tar.gz
mv llvm-3.4.2.src llvm
cd llvm/tools
git clone https://github.com/sierra-lang/sierra.git clang
cd ../../build_debug
cmake ../llvm -DCMAKE_BUILD_TYPE=Debug -DBUILD_SHARED_LIBS=1 -DCMAKE_INSTALL_PREFIX=/path/to/sierra/install_debug/
make
make install</code></pre>

<p>
    Alternatively, you can use the cmake-gui tool: <code>cmake-gui ../llvm</code>
    Then,
</p>
<ul>
    <li>press <code>configure</code></li>
    <li>set <code>CMAKE_INSTALL_PREFIX</code> to <code>/path/to/sierra/install_debug</code></li>
    <li>set <code>CMAKE_BUILD_TYPE</code> to <code>Debug</code></li>
    <li>set <code>BUILD_SHARED_LIBS</code> and</li>
    <li>press <code>generate</code>.</li>
</ul>

<h3>Release Build</h3>
<p>
    For a <em>release</em> build we do the following:
</p>
<pre><code>mkdir sierra
cd sierra
mkdir build_release
mkdir install_release
git clone https://github.com/sierra-lang/libsierra.git
wget http://llvm.org/releases/3.4.2/llvm-3.4.2.src.tar.gz
tar xzfv llvm-3.4.2.src.tar.gz
mv llvm-3.4.2.src llvm
cd llvm/tools
git clone https://github.com/sierra-lang/sierra.git clang
cd ../../build_release
cmake ../llvm -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=1 -DCMAKE_INSTALL_PREFIX=/path/to/sierra/install_release/
make
make install</code></pre>

<h2>Troubleshooting</h2>

<h3>Python 2</h3>
<p>
    LLVM's build scripts make use of python. 
    Apparently, python version 3 causes problems. 
    Thus, you have to stick to python 2. 
    If you don't want to mess around with your distribution too much, do something like this:
</p>
<pre><code>cd ~
mkdir bin
ln -s /usr/bin/python2 ~/bin/python
export PATH=~/bin:$PATH</code></pre>
<p>
    You can confirm with <code>pyhton --version</code> that python actually points to version 2.
    Eventually, you may want to put <code>export PATH=~/bin:$PATH</code> into your <code>~/.bashrc</code>.
</p>

<h3>Debugging clang</h3>
<p>
    Invoke <code>clang</code> with the <code>-cc1</code> switch in order to actually catch breakpoints. 
    This will just invoke the pure front end - no code generation. 
    Add <code>-emit-llvm</code> or <code>-emit-obj</code> to peek into later stages. 
    Use the <code>-v</code> switch to see full command-line arguments and paste them into your gdb-run command.
</p>

<h2>Status</h2>

<h3>Supported Control-Flow Construts</h3>
<p>
    The following constructs are currently supported in a <em>vectorial</em> context.
    The still work as normal in <em>scalar</em> context.
</p>
<table>
    <thead>
        <tr>
            <th>Feature</th>
            <th align="center">Supported?</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>if ... else</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>while</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>do ... while</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>for</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>break</code></td>
            <td align="center"><a href="images/no.png" target="_blank"><img src="images/no.png" alt="check" title="No" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>continue</code></td>
            <td align="center"><a href="images/no.png" target="_blank"><img src="images/no.png" alt="check" title="No" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>return</code></td>
            <td align="center"><a href="images/no.png" target="_blank"><img src="images/no.png" alt="check" title="No" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>switch</code></td>
            <td align="center"><a href="images/no.png" target="_blank"><img src="images/no.png" alt="check" title="No" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>case</code></td>
            <td align="center"><a href="images/no.png" target="_blank"><img src="images/no.png" alt="check" title="No" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>goto</code></td>
            <td align="center"><a href="images/no.png" target="_blank"><img src="images/no.png" alt="check" title="No" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>expr || expr</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>expr && expr</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>!expr</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>expr ? expr : expr</code></td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
    </tbody>
</table>

<h3>Type System</h3>

<table>
    <thead>
        <tr>
            <th>Feature</th>
            <th align="center">Supported?</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>varying</code> primitive types</td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td>pointers and references to <code>varying</code> types</td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/yes.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>varying</code> pointers and references</td>
            <td align="center"><a href="images/yes.png" target="_blank"><img src="images/no.png" alt="check" title="No" style="max-width:100%;"></a></td>
        </tr>
        <tr>
            <td><code>varying</code> structures</td>
            <td align="center">some initial support is there</td>
        </tr>
    </tbody>
</table>

<h3>Known Issues</h3>

<ul>
    <li>
        The semantic analysis which checks whether vector lengths match is currently disabled. 
        There are problems with template instantiation.
        Mixing vector lengths in an illegal way causes crashes.
    </li>
    <li>
        In some circumstances <code>expr ? expr : expr</code> causes crashes.
    </li>
    <li>
        The attribute <code>spmd(L)</code> cannot depend on a template parameter <code>L</code>.
    </li>
</ul>

<h2>Publications</h2>
<p>
    <em>Roland Leißa, Immanuel Haffner, and Sebastian Hack</em><br />
    <strong><a href="http://www.cdl.uni-saarland.de/papers/lhh14.pdf">Sierra: A SIMD Extension for C++.</a></strong><br />
    In Proceedings of Proceedings of the Workshop on Programming models for SIMD/Vector processing (WPMVP), 2014.
</p>
<p>
    <em>Roland Leißa, Ingo Wald, and Sebastian Hack</em><br />
    <strong><a href="http://www.cdl.uni-saarland.de/papers/leissa_vecimp.pdf">Extending a C-like Language for Portable SIMD Programming.</a></strong><br />
    In Proceedings of the Conference on Principles and Practice of Parallel Programming (PPoPP), 2012.
</p>

      </div>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <div class="inner">
        <p class="inline">© 2014 Saarland University</p>
        <ul class="footer_list">
          <li class="footer_li"><a href="http://www.cdl.uni-saarland.de/">Compiler Design Lab</a></li>
          <li class="footer_li"><a href="http://www.uni-saarland.de/">Saarland University</a></li>
        </ul>
      </div>
    </div>
    

  </body>
</html>
